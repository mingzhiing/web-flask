<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>直肠癌T分期预测平台</title>
  <link rel="shortcut icon" href="../static/icon.png">
  <link rel="stylesheet" href="../static/sampleStatic/css/style.css">
  <!-- 引入 ajax 库：axios-->
  <script src="https://cdn.bootcdn.net/ajax/libs/axios/1.1.3/axios.js"></script>
</head>
<body>
<div id="background">
  <svg width="100%" height="100%" id="svg" viewBox="0 0 1440 50" xmlns="http://www.w3.org/2000/svg" class="transition duration-300 ease-in-out delay-150" _mstHidden="2"><style>
    .path-0{
      animation:pathAnim-0 4s;
      animation-timing-function: linear;
      animation-iteration-count: infinite;
    }
    @keyframes pathAnim-0{
      0%{
        d: path("M 0,400 C 0,400 0,133 0,133 C 60.53609569614011,139.56046368232828 121.07219139228022,146.12092736465655 170,133 C 218.92780860771978,119.87907263534343 256.2473301270193,87.07675422370205 304,100 C 351.7526698729807,112.92324577629795 409.9384880996424,171.57205574053523 465,168 C 520.0615119003576,164.42794425946477 571.9987174744111,98.63502281415711 624,87 C 676.0012825255889,75.36497718584289 728.066642002713,117.88785300283635 790,117 C 851.933357997287,116.11214699716365 923.7347145147367,71.81356517449746 984,84 C 1044.2652854852633,96.18643482550254 1092.9944999383404,164.85788629917377 1144,176 C 1195.0055000616596,187.14211370082623 1248.2872857319028,140.7548896288075 1298,124 C 1347.7127142680972,107.24511037119251 1393.8563571340487,120.12255518559626 1440,133 C 1440,133 1440,400 1440,400 Z");
      }
      25%{
        d: path("M 0,400 C 0,400 0,133 0,133 C 60.16519916142556,126.59319274879763 120.33039832285112,120.18638549759525 173,120 C 225.66960167714888,119.81361450240475 270.843605870021,125.84765075841658 320,115 C 369.156394129979,104.15234924158342 422.29517819706496,76.42301146873845 471,83 C 519.704821802935,89.57698853126155 563.9756813417191,130.46030336662966 615,144 C 666.0243186582809,157.53969663337034 723.8020964360587,143.73577506474288 787,143 C 850.1979035639413,142.26422493525712 918.8159329140462,154.5965963743988 981,158 C 1043.1840670859538,161.4034036256012 1098.9341719077568,155.87783943766186 1141,153 C 1183.0658280922432,150.12216056233814 1211.4473794549267,149.89204587495377 1259,147 C 1306.5526205450733,144.10795412504623 1373.2763102725366,138.55397706252313 1440,133 C 1440,133 1440,400 1440,400 Z");
      }
      50%{
        d: path("M 0,400 C 0,400 0,133 0,133 C 42.8043408558392,112.86923171784437 85.6086817116784,92.73846343568873 134,96 C 182.3913182883216,99.26153656431127 236.36961400912566,125.9153779750894 291,125 C 345.63038599087434,124.0846220249106 400.912862251819,95.60002466395363 455,106 C 509.087137748181,116.39997533604637 561.9789369835984,165.68452336909607 623,165 C 684.0210630164016,164.31547663090393 753.1713898137873,113.6618818596621 818,105 C 882.8286101862127,96.3381181403379 943.335503761253,129.66794919225552 984,146 C 1024.664496238747,162.33205080774448 1045.4865951412012,161.66632137131583 1094,160 C 1142.5134048587988,158.33367862868417 1218.7181156739425,155.66676532248118 1281,151 C 1343.2818843260575,146.33323467751882 1391.6409421630287,139.6666173387594 1440,133 C 1440,133 1440,400 1440,400 Z");
      }
      75%{
        d: path("M 0,400 C 0,400 0,133 0,133 C 57.65445800961895,112.02636576643236 115.3089160192379,91.05273153286473 167,86 C 218.6910839807621,80.94726846713527 264.41879393266737,91.81543963497349 323,100 C 381.58120606733263,108.18456036502651 453.0159082500926,113.68550992724133 503,120 C 552.9840917499074,126.31449007275867 581.5175730669625,133.44252065606116 627,134 C 672.4824269330375,134.55747934393884 734.913799482057,128.544407448514 794,123 C 853.086200517943,117.45559255148602 908.8272290048094,112.37984954988285 964,113 C 1019.1727709951906,113.62015045011715 1073.7772844987053,119.93619435195461 1121,135 C 1168.2227155012947,150.0638056480454 1208.06363300037,173.87537304229866 1260,175 C 1311.93636699963,176.12462695770134 1375.968183499815,154.56231347885068 1440,133 C 1440,133 1440,400 1440,400 Z");
      }
      100%{
        d: path("M 0,400 C 0,400 0,133 0,133 C 60.53609569614011,139.56046368232828 121.07219139228022,146.12092736465655 170,133 C 218.92780860771978,119.87907263534343 256.2473301270193,87.07675422370205 304,100 C 351.7526698729807,112.92324577629795 409.9384880996424,171.57205574053523 465,168 C 520.0615119003576,164.42794425946477 571.9987174744111,98.63502281415711 624,87 C 676.0012825255889,75.36497718584289 728.066642002713,117.88785300283635 790,117 C 851.933357997287,116.11214699716365 923.7347145147367,71.81356517449746 984,84 C 1044.2652854852633,96.18643482550254 1092.9944999383404,164.85788629917377 1144,176 C 1195.0055000616596,187.14211370082623 1248.2872857319028,140.7548896288075 1298,124 C 1347.7127142680972,107.24511037119251 1393.8563571340487,120.12255518559626 1440,133 C 1440,133 1440,400 1440,400 Z");
      }
    }</style><defs><linearGradient id="gradient" x1="0%" y1="50%" x2="100%" y2="50%"><stop offset="5%" stop-color="#0693e3"></stop><stop offset="95%" stop-color="#8ed1fc"></stop></linearGradient></defs><path d="M 0,400 C 0,400 0,133 0,133 C 60.53609569614011,139.56046368232828 121.07219139228022,146.12092736465655 170,133 C 218.92780860771978,119.87907263534343 256.2473301270193,87.07675422370205 304,100 C 351.7526698729807,112.92324577629795 409.9384880996424,171.57205574053523 465,168 C 520.0615119003576,164.42794425946477 571.9987174744111,98.63502281415711 624,87 C 676.0012825255889,75.36497718584289 728.066642002713,117.88785300283635 790,117 C 851.933357997287,116.11214699716365 923.7347145147367,71.81356517449746 984,84 C 1044.2652854852633,96.18643482550254 1092.9944999383404,164.85788629917377 1144,176 C 1195.0055000616596,187.14211370082623 1248.2872857319028,140.7548896288075 1298,124 C 1347.7127142680972,107.24511037119251 1393.8563571340487,120.12255518559626 1440,133 C 1440,133 1440,400 1440,400 Z" stroke="none" stroke-width="0" fill="url(#gradient)" fill-opacity="0.53" class="transition-all duration-300 ease-in-out delay-150 path-0"></path><style>
    .path-1{
      animation:pathAnim-1 4s;
      animation-timing-function: linear;
      animation-iteration-count: infinite;
    }
    @keyframes pathAnim-1{
      0%{
        d: path("M 0,400 C 0,400 0,266 0,266 C 44.33434455543224,277.3457639659637 88.66868911086448,288.69152793192745 138,276 C 187.33131088913552,263.30847206807255 241.65958811197436,226.5796522382538 306,221 C 370.34041188802564,215.4203477617462 444.69295844123803,240.98986311505735 498,251 C 551.307041558762,261.01013688494265 583.5685781230732,255.46089530151684 627,255 C 670.4314218769268,254.53910469848316 725.0327290664693,259.16655567887534 776,256 C 826.9672709335307,252.83344432112466 874.3005056110494,241.87288198298182 935,237 C 995.6994943889506,232.12711801701818 1069.765248489333,233.34191638919722 1133,234 C 1196.234751510667,234.65808361080278 1248.6385004316191,234.75945246022937 1298,240 C 1347.3614995683809,245.24054753977063 1393.6807497841905,255.62027376988533 1440,266 C 1440,266 1440,400 1440,400 Z");
      }
      25%{
        d: path("M 0,400 C 0,400 0,266 0,266 C 60.66992230854605,256.0476014305093 121.3398446170921,246.0952028610186 166,242 C 210.6601553829079,237.9047971389814 239.31054384017756,239.66678998643482 296,246 C 352.68945615982244,252.33321001356518 437.4179800221975,263.23763719324205 504,271 C 570.5820199778025,278.76236280675795 619.0175360710323,283.38266124059686 666,273 C 712.9824639289677,262.61733875940314 758.5118756936737,237.23171784437048 808,222 C 857.4881243063263,206.76828215562952 910.934961154273,201.6904673819213 965,216 C 1019.065038845727,230.3095326180787 1073.7482796892343,264.00641262794426 1124,269 C 1174.2517203107657,273.99358737205574 1220.07192008879,250.28388210630163 1272,245 C 1323.92807991121,239.71611789369837 1381.9640399556051,252.85805894684918 1440,266 C 1440,266 1440,400 1440,400 Z");
      }
      50%{
        d: path("M 0,400 C 0,400 0,266 0,266 C 54.335232457762984,252.0229868047848 108.67046491552597,238.04597360956964 169,232 C 229.32953508447403,225.95402639043036 295.6533727956591,227.83909236650632 349,239 C 402.3466272043409,250.16090763349368 442.71604390183757,270.597656924405 488,271 C 533.2839560981624,271.402343075595 583.4824515969909,251.7702799358737 643,251 C 702.5175484030091,250.2297200641263 771.3541497101986,268.3212233321002 817,279 C 862.6458502898014,289.6787766678998 885.1009495622149,292.9448267357257 940,282 C 994.8990504377851,271.0551732642743 1082.2420520409423,245.89946972499692 1149,234 C 1215.7579479590577,222.10053027500308 1261.9308422740166,223.45729436428658 1307,231 C 1352.0691577259834,238.54270563571342 1396.0345788629916,252.27135281785672 1440,266 C 1440,266 1440,400 1440,400 Z");
      }
      75%{
        d: path("M 0,400 C 0,400 0,266 0,266 C 40.543988161302266,249.09004809470957 81.08797632260453,232.18009618941915 134,220 C 186.91202367739547,207.81990381058085 252.19208287088412,200.36966333703293 307,221 C 361.8079171291159,241.63033666296707 406.1436921938588,290.3412504624491 454,307 C 501.8563078061412,323.6587495375509 553.233148353681,308.26533481317057 612,294 C 670.766851646319,279.73466518682943 736.923714391417,266.5974102848687 795,269 C 853.076285608583,271.4025897151313 903.0719940806509,289.34502404735474 950,296 C 996.9280059193491,302.65497595264526 1040.7883092859788,298.02249352571215 1096,297 C 1151.2116907140212,295.97750647428785 1217.7747687754345,298.56500184979654 1277,294 C 1336.2252312245655,289.43499815020346 1388.1126156122828,277.7174990751017 1440,266 C 1440,266 1440,400 1440,400 Z");
      }
      100%{
        d: path("M 0,400 C 0,400 0,266 0,266 C 44.33434455543224,277.3457639659637 88.66868911086448,288.69152793192745 138,276 C 187.33131088913552,263.30847206807255 241.65958811197436,226.5796522382538 306,221 C 370.34041188802564,215.4203477617462 444.69295844123803,240.98986311505735 498,251 C 551.307041558762,261.01013688494265 583.5685781230732,255.46089530151684 627,255 C 670.4314218769268,254.53910469848316 725.0327290664693,259.16655567887534 776,256 C 826.9672709335307,252.83344432112466 874.3005056110494,241.87288198298182 935,237 C 995.6994943889506,232.12711801701818 1069.765248489333,233.34191638919722 1133,234 C 1196.234751510667,234.65808361080278 1248.6385004316191,234.75945246022937 1298,240 C 1347.3614995683809,245.24054753977063 1393.6807497841905,255.62027376988533 1440,266 C 1440,266 1440,400 1440,400 Z");
      }
    }</style><defs><linearGradient id="gradient" x1="0%" y1="50%" x2="100%" y2="50%"><stop offset="5%" stop-color="#0693e3"></stop><stop offset="95%" stop-color="#8ed1fc"></stop></linearGradient></defs><path d="M 0,400 C 0,400 0,266 0,266 C 44.33434455543224,277.3457639659637 88.66868911086448,288.69152793192745 138,276 C 187.33131088913552,263.30847206807255 241.65958811197436,226.5796522382538 306,221 C 370.34041188802564,215.4203477617462 444.69295844123803,240.98986311505735 498,251 C 551.307041558762,261.01013688494265 583.5685781230732,255.46089530151684 627,255 C 670.4314218769268,254.53910469848316 725.0327290664693,259.16655567887534 776,256 C 826.9672709335307,252.83344432112466 874.3005056110494,241.87288198298182 935,237 C 995.6994943889506,232.12711801701818 1069.765248489333,233.34191638919722 1133,234 C 1196.234751510667,234.65808361080278 1248.6385004316191,234.75945246022937 1298,240 C 1347.3614995683809,245.24054753977063 1393.6807497841905,255.62027376988533 1440,266 C 1440,266 1440,400 1440,400 Z" stroke="none" stroke-width="0" fill="url(#gradient)" fill-opacity="1" class="transition-all duration-300 ease-in-out delay-150 path-1"></path></svg>
  </div>
<div id="lizi">
  <canvas id="canvas" style="position:fixed;"><script src="../static/sampleStatic/js/beijing.js"></script></canvas>
<div style="height: 10px"></div>
<div class="glass-container" id="glass">
  <div style="height: 10px"></div>
  <div style="width: 100%; text-align: center; margin: 0 auto;">
    <span class="word1">直肠癌T分期预测平台</span>
    <div>
      <!-- 文件选择框 -->
      <!-- accept 属性表示可选择的文件类型 -->
      <!-- image/* 表示只允许选择图片类型的文件 -->
      <input type="file" id="iptFile" accept="image/*" style="display: none">
    </div>
    <div>
      <h4><span class="word2">单张图片预测结果：</span><span id="tempVale"></span></h4>
      <img class="css1" id="tempImg" style="width: 200px; height:200px; object-fit: contain"/>
    </div>
    <div>
      <!-- 选择头像图片的按钮 -->
      <p><button  id="btnChoose"><span class="word3">选择 & 上传图片</span></button></p>
    </div>
  </div>
  <hr style="width: 90%;" />
  <div style="width: 100%; text-align: center; margin: 0 auto" >
    <input type="file" name="img"  id="iptFile1" webkitdirectory value="选择文件夹" style="display: none"/>
    <button  id="btnChoose1"><span class="word3">选择 & 上传图片文件夹</span></button>
    <div>
      <h4><span class="word2">批量预测结果：</span></h4>
      <div>
        <button id="a" onclick="cha()"><font color="#105cb6" size="3">显示/隐藏</font></button>
      </div>
      <img id="tempImg1"/>
    </div>
  </div>
</div>
</div>
<script>

  // 点击选择上传图片实际上执行的是 input:file
  let btn = document.getElementById('btnChoose');
  let iptFile = document.getElementById('iptFile');
  btn.addEventListener('click', function () {
    // 使用事件自调用
    iptFile.click();
  })
  // 写一个监听事件判断是否选中文件
  iptFile.addEventListener('change', function (e) {

    // 可以看到事件对象中的files属性获取的是filesList是一个伪数组

    // 判断用户是否选择了文件，因为不仅仅是选择图片会触发change事件，用户点击取消也会触发
    if (e.target.files.length === 0) return
    // 获取图片文件
    let file = e.target.files[0]//因为input:file只能选中一个文件，选中的这个文件就是我们所需要的文件，所以直接通过下标获取到图片文件
    // 将图片保存到FormData中,方便将图片上传到服务器上
    let formData = new FormData();
    formData.append('img', file);
    // 使用 ajax 发送 formData 对象
    axios.post('http://127.0.0.1:5000/imageUpload', formData).then(({ data }) => {
      // 上传成功后，显示结果
      if (data.msg === 'ok') {
        const oSpan = document.querySelector('#tempVale')
        const oImg = document.querySelector('#tempImg')
        oImg.src = data.img_url
        oSpan.innerText = data.tempVal;
      }
    });
  });


  const btn1 = document.getElementById('btnChoose1');
  let iptFile1 = document.getElementById('iptFile1');
  btn1.addEventListener('click', function () {
    // 使用事件自调用
    iptFile1.click();
  })
  iptFile1.addEventListener('change', function (e) {

    // 可以看到事件对象中的files属性获取的是filesList是一个伪数组

    // 判断用户是否选择了文件，因为不仅仅是选择图片会触发change事件，用户点击取消也会触发
    if (e.target.files.length === 0) return

    // 获取所有图片文件
    let files = e.target.files
    // 将图片保存到FormData中,方便将图片上传到服务器上
    let formData = new FormData();
    for(let i=0; i < files.length; ++i){
      formData.append("dir", files[i]);
    }
    // 使用 ajax 发送 formData 对象
    axios.post('http://127.0.0.1:5000/dirUpload', formData).then(({ data }) => {
      // 上传成功后，显示结果
      if (data.msg === 'ok') {
        const oA = document.querySelector('#a')
        const oImg = document.querySelector('#tempImg1')
        oImg.src = data.img_url
        oA.setAttribute('href', data.img_url);
      }
    });
  });

  var tu=document.getElementById("tempImg1")
  function cha(){
    if(tu.style.display=='block'){
      tu.style.display='none';
    }
    else{
      tu.style.display='block';
    }
  }
</script>
</body>
</html>
<!---->
